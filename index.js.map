{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n\nexport async function getImagesByQuery(query, page) {\n    try {\n        const res = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: '52365869-dd7c55ea3ac5eab5a979f8f09',\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 15,\n                page: page,\n            }\n        })\n        return res.data;\n    }\n    catch (err) {\n        console.error(err);\n        throw err; \n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n\n    const markup = images\n        .map(image => {\n            const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n            return `<li class=\"gallery-item\"><a href=\"${image.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"/>\n                </a>\n                <ul class=\"info\">\n                    <li class=\"info-item\">\n                    <p class=\"text\">Likes:</p>\n                    <span class=\"number\">${image.likes}</span>\n                    </li>\n\n                    <li class=\"info-item\">\n                    <p class=\"text\">Views:</p>\n                    <span class=\"number\">${image.views}</span>\n                    </li>\n\n                    <li class=\"info-item\">\n                    <p class=\"text\">Comments:</p>\n                    <span class=\"number\">${image.comments}</span>\n                    </li>\n\n                    <li class=\"info-item\">\n                    <p class=\"text\">Downloads:</p>\n                    <span class=\"number\">${image.downloads}</span>\n                    </li>\n\n                </ul>\n                </li>`\n        })\n        .join('')\n    /*document.querySelector('.gallery').innerHTML = markup;*/\n    document.querySelector('.gallery').insertAdjacentHTML('beforeend', markup);\n\n\n    \n    lightbox.refresh();\n}\n\n\nexport function clearGallery() {\n    document.querySelector('.gallery').innerHTML = '';\n}\n\nexport function showLoader() {\n    document.querySelector('.loader').classList.add('is-open');\n}\n\n\nexport function hideLoader() {\n    document.querySelector('.loader').classList.remove('is-open');\n}\n\nexport function showLoadMoreButton() {\n    document.querySelector('.load-more-btn').classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n    document.querySelector('.load-more-btn').classList.add('is-hidden');\n}\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton} from \"./js/render-functions\";\n\nconst input = document.querySelector('.search-input');\nconst form = document.querySelector('.form');\n\n    let page = 1;\n    let perPage = 15;\n    \n    let currentQuery = '';\n\n\nasync function searchImages(event) {\n    event.preventDefault();\n    const query = input.value.trim();\n    page = 1;\n\n    hideLoadMoreButton();\n\n\n    if (!query.length) {\n        iziToast.error({\n        position: 'topRight',\n        message: 'Please fill out this field.',\n    });\n        return\n    };\n\n    if (query !== currentQuery) {\n        clearGallery();\n        currentQuery = query;\n    }\n    \n    \n    \n    showLoader();\n\n    try {\n        const { hits, totalHits } = await getImagesByQuery(query, page);\n        \n            if (hits.length === 0) {\n            iziToast.error({\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            hideLoadMoreButton();\n        } else {\n                createGallery(hits);\n\n            const { height: cardHeight } = document\n            .querySelector(\".gallery\")\n            .firstElementChild.getBoundingClientRect();\n\n            window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n\n            if (page * perPage < totalHits) {\n                showLoadMoreButton();\n            } else {\n                hideLoadMoreButton();\n                iziToast.info({ message: \"No more images to load\" });\n                };\n        };\n    } catch (err){\n        console.error(err);\n        iziToast.error({\n        position: 'topRight',\n        message: 'Oops! Something went wrong. Please try again.'\n    });\n    }\n    finally {\n        hideLoader();\n\n    }\n    \n};\n\nasync function loadMoreImages() {\n    page++;\n\n    hideLoadMoreButton();\n\n    showLoader();\n\n    try {\n        const { hits, totalHits } = await getImagesByQuery(currentQuery, page);\n        \n        \n        createGallery(hits);\n\n        const { height: cardHeight } = document\n            .querySelector(\".gallery\")\n            .firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n\n        if (page * perPage < totalHits) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n            iziToast.info({ message: \"No more images to load\" });\n        }\n\n        \n    } catch (err) {\n        console.error(err)\n        iziToast.error({\n        position: 'topRight',\n        message: 'Oops! Something went wrong. Please try again.'\n    });\n    }finally {\n        hideLoader();\n        \n    }\n    \n}\n\n\nform.addEventListener('submit', searchImages);\ndocument.querySelector('.load-more-btn').addEventListener('click', loadMoreImages);\n\n"],"names":["getImagesByQuery","query","page","axios","err","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","input","form","perPage","currentQuery","searchImages","event","iziToast","hits","totalHits","cardHeight","loadMoreImages"],"mappings":"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"}