{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n\nexport async function getImagesByQuery(query, page) {\n    try {\n        const res = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: '52365869-dd7c55ea3ac5eab5a979f8f09',\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 15,\n                page: page,\n            }\n        })\n        return res.data.hits;\n    }\n    catch (err) {\n        console.error(err);\n        \n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n\n    const markup = images\n        .map(image => {\n            const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n            return `<li class=\"gallery-item\"><a href=\"${image.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"/>\n                </a>\n                <ul class=\"info\">\n                    <li class=\"info-item\">\n                    <p class=\"text\">Likes:</p>\n                    <span class=\"number\">${image.likes}</span>\n                    </li>\n\n                    <li class=\"info-item\">\n                    <p class=\"text\">Views:</p>\n                    <span class=\"number\">${image.views}</span>\n                    </li>\n\n                    <li class=\"info-item\">\n                    <p class=\"text\">Comments:</p>\n                    <span class=\"number\">${image.comments}</span>\n                    </li>\n\n                    <li class=\"info-item\">\n                    <p class=\"text\">Downloads:</p>\n                    <span class=\"number\">${image.downloads}</span>\n                    </li>\n\n                </ul>\n                </li>`\n        })\n        .join('')\n    /*document.querySelector('.gallery').innerHTML = markup;*/\n    document.querySelector('.gallery').insertAdjacentHTML('beforeend', markup);\n\n\n    \n    lightbox.refresh();\n}\n\n\nexport function clearGallery() {\n    document.querySelector('.gallery').innerHTML = '';\n}\n\nexport function showLoader() {\n    document.querySelector('.loader').classList.add('is-open');\n}\n\n\nexport function hideLoader() {\n    document.querySelector('.loader').classList.remove('is-open');\n}\n\nexport function showLoadMoreButton() {\n    document.querySelector('.load-more-btn').classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n    document.querySelector('.load-more-btn').classList.add('is-hidden');\n}\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton} from \"./js/render-functions\";\n\nconst input = document.querySelector('.search-input');\nconst form = document.querySelector('.form');\n\n    let page = 1;\n    let perPage = 15;\n    \n    let currentQuery = '';\n\n\nasync function searchImages(event) {\n    event.preventDefault();\n    const query = input.value.trim();\n    page = 1;\n\n\n    if (!query.length) {\n        return\n    };\n\n    if (query !== currentQuery) {\n        clearGallery();\n        currentQuery = query;\n        form.reset();\n    }\n    \n    \n    \n    showLoader();\n\n    try {\n        const images = await getImagesByQuery(query, page);\n            if (images.length === 0) {\n            iziToast.error({\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        } else {\n            createGallery(images);\n            showLoadMoreButton();\n            if (images.length < perPage) {\n                hideLoadMoreButton();\n                iziToast.info({ message: \"No more images to load\" });\n            }\n        }\n    } catch (err){\n        console.error(err)\n    }\n    finally {\n        hideLoader();\n\n    }\n    \n};\n\nasync function loadMoreImages() {\n    const query = input.value.trim();\n    page++;\n\n    showLoader();\n\n    try {\n        const images = await getImagesByQuery(currentQuery, page);\n        \n        createGallery(images);\n\n        if (images.length < perPage) {\n                hideLoadMoreButton();\n                iziToast.info({ message: \"No more images to load\" });\n            }\n\n        \n    } catch (err) {\n        console.error(err)\n    }finally {\n        hideLoader();\n        \n    }\n    \n}\n\n\nform.addEventListener('submit', searchImages);\ndocument.querySelector('.load-more-btn').addEventListener('click', loadMoreImages);\n\n"],"names":["getImagesByQuery","query","page","axios","err","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","input","form","perPage","currentQuery","searchImages","event","iziToast","loadMoreImages"],"mappings":"+vBAGO,eAAeA,EAAiBC,EAAOC,EAAM,CAChD,GAAI,CAYA,OAXY,MAAMC,EAAM,IAAI,2BAA4B,CACpD,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACT,CACb,CAAS,GACU,KAAK,IACnB,OACME,EAAK,CACR,QAAQ,MAAMA,CAAG,CAEpB,CACL,CCnBA,MAAMC,EAAW,IAAIC,EAAe,YAAY,EAEzC,SAASC,EAAcC,EAAQ,CAElC,MAAMC,EAASD,EACV,IAAIE,GAEM,qCAAqCA,EAAM,aAAa;AAAA,kDACzBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,2CAK7CA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,2CAKXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,2CAKXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,2CAKdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,sBAKjD,EACA,KAAK,EAAE,EAEZ,SAAS,cAAc,UAAU,EAAE,mBAAmB,YAAaD,CAAM,EAIzEJ,EAAS,QAAO,CACpB,CAGO,SAASM,GAAe,CAC3B,SAAS,cAAc,UAAU,EAAE,UAAY,EACnD,CAEO,SAASC,GAAa,CACzB,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,SAAS,CAC7D,CAGO,SAASC,GAAa,CACzB,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,SAAS,CAChE,CAEO,SAASC,GAAqB,CACjC,SAAS,cAAc,gBAAgB,EAAE,UAAU,OAAO,WAAW,CACzE,CAEO,SAASC,GAAqB,CACjC,SAAS,cAAc,gBAAgB,EAAE,UAAU,IAAI,WAAW,CACtE,CC3DA,MAAMC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAO,SAAS,cAAc,OAAO,EAEvC,IAAIf,EAAO,EACPgB,EAAU,GAEVC,EAAe,GAGvB,eAAeC,EAAaC,EAAO,CAC/BA,EAAM,eAAc,EACpB,MAAMpB,EAAQe,EAAM,MAAM,KAAI,EAI9B,GAHAd,EAAO,EAGH,EAACD,EAAM,OAIX,CAAIA,IAAUkB,IACVR,IACAQ,EAAelB,EACfgB,EAAK,MAAK,GAKdL,IAEA,GAAI,CACA,MAAMJ,EAAS,MAAMR,EAAiBC,EAAOC,CAAI,EACzCM,EAAO,SAAW,EACtBc,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EACzB,CAAa,GAEDf,EAAcC,CAAM,EACpBM,IACIN,EAAO,OAASU,IAChBH,IACAO,EAAS,KAAK,CAAE,QAAS,wBAA0B,CAAA,GAG9D,OAAQlB,EAAI,CACT,QAAQ,MAAMA,CAAG,CACpB,QACO,CACJS,GAEH,EAEL,CAEA,eAAeU,GAAiB,CACdP,EAAM,MAAM,KAAO,EACjCd,IAEAU,IAEA,GAAI,CACA,MAAMJ,EAAS,MAAMR,EAAiBmB,EAAcjB,CAAI,EAExDK,EAAcC,CAAM,EAEhBA,EAAO,OAASU,IACZH,IACAO,EAAS,KAAK,CAAE,QAAS,wBAA0B,CAAA,EAI9D,OAAQlB,EAAK,CACV,QAAQ,MAAMA,CAAG,CACzB,QAAK,CACGS,GAEH,CAEL,CAGAI,EAAK,iBAAiB,SAAUG,CAAY,EAC5C,SAAS,cAAc,gBAAgB,EAAE,iBAAiB,QAASG,CAAc"}